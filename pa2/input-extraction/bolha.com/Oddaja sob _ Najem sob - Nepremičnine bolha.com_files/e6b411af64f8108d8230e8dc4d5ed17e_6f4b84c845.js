(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{13:function(t,e,i){"use strict";var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(e,i){a(this,t),this.id=i,this._type=e,this._attributes=[],this._dependents=[],this._relationships=[],this._links=this.links={},this._relationshipLinks={},this._meta=this.meta={},this._relationshipMeta={},this._destroyed=!1}return n(t,[{key:"_addDependence",value:function(t,e,i){var n,a;n=this._dependents,a=function(n){return n.id===e&&n.type===t&&n.relation===i},void 0===(Array.prototype.find?n.find(a):n.filter(a).shift())&&this._dependents.push({id:e,type:t,relation:i})}},{key:"_removeDependence",value:function(t,e){var i=this;i._dependents.forEach((function(n,a){n.id===e&&n.type===t&&i._dependents.splice(a,1)}))}},{key:"removeRelationship",value:function(t,e,i){var n=this;n._removeDependence(t,e),n[i].constructor===Array?n[i].forEach((function(a,s){a.id===e&&a._type===t&&n[i].splice(s,1)})):n[i].id===e&&(n[i]=null)}},{key:"serialize",value:function(t){var e=this,i={data:{type:this._type}};return(t=t||{}).attributes=t.attributes||this._attributes,t.relationships=t.relationships||this._relationships,t.links=t.links||void 0,t.meta=t.meta||void 0,void 0!==this.id&&(i.data.id=this.id),0!==t.attributes.length&&(i.data.attributes={}),0!==t.relationships.length&&(i.data.relationships={}),t.attributes.forEach((function(t){i.data.attributes[t]=e[t]})),t.relationships.forEach((function(t){function n(t){return{type:t._type,id:t.id}}e[t]?e[t].constructor===Array?i.data.relationships[t]={data:e[t].map(n)}:i.data.relationships[t]={data:n(e[t])}:i.data.relationships[t]={data:null},e._relationshipLinks[t]&&(i.data.relationships[t].links=e._relationshipLinks[t]),e._relationshipMeta[t]&&(i.data.relationships[t].meta=e._relationshipMeta[t])})),0!==Object.keys(this._links).length&&(void 0===t.links?i.data.links=this._links:t.links&&0!==t.links.length&&(i.data.links={},t.links.forEach((function(t){i.data.links[t]=e._links[t]})))),0!==Object.keys(this._meta).length&&(void 0===t.meta?i.data.meta=this._meta:t.meta&&0!==t.meta.length&&(i.data.meta={},t.meta.forEach((function(t){i.data.meta[t]=e._meta[t]})))),i}},{key:"setAttribute",value:function(t,e){void 0===this[t]&&this._attributes.push(t),this[t]=e}},{key:"setRelationship",value:function(t,e){var i=this;void 0===i[t]?(i._relationships.push(t),i[t]=e):i[t].constructor===Array?i[t].push(e):i[t]=e}}]),t}(),r=function(){function t(){a(this,t),this.graph={},this.order={}}return n(t,[{key:"destroy",value:function(t){var e=this;t._destroyed=!0,t._dependents.forEach((function(i,n){e.graph[i.type][i.id].removeRelationship(t._type,t.id,i.relation)})),delete this.graph[t._type][t.id],this.order[t._type].splice(this.order[t._type].indexOf(t.id),1)}},{key:"find",value:function(t,e){return this.graph[t]&&this.graph[t][e]?this.graph[t][e]:null}},{key:"findAll",value:function(t){var e=this;return this.graph[t]?e.order[t].map((function(i){return e.graph[t][i]})):[]}},{key:"reset",value:function(){this.graph={},this.order={}}},{key:"initModel",value:function(t,e){this.graph[t]=this.graph[t]||{},this.order[t]=this.order[t]||[],this.graph[t][e]=this.graph[t][e]||new s(t,e);var i=this.order[t].indexOf(e);return-1===i||this.order[t].splice(i,1),this.order[t].push(e),this.graph[t][e]}},{key:"syncRecord",value:function(t){var e,i=this,n=this.initModel(t.type,t.id);function a(t){i.find(t.type,t.id)||(i.initModel(t.type,t.id)._placeHolder=!0);return i.graph[t.type][t.id]}for(e in delete n._placeHolder,t.attributes)-1===n._attributes.indexOf(e)&&n._attributes.push(e),n[e]=t.attributes[e];if(t.links&&(n._links=n.links=t.links),t.meta&&(n._meta=n.meta=t.meta),t.relationships)for(e in t.relationships){var s=t.relationships[e];void 0!==s.data&&(-1===n._relationships.indexOf(e)&&n._relationships.push(e),null===s.data?n[e]=null:s.data.constructor===Array?(n[e]=s.data.map(a),n[e].forEach((function(t){t._addDependence(n._type,n.id,e)}))):(n[e]=a(s.data),n[e]._addDependence(n._type,n.id,e))),s.links&&(n._relationshipLinks[e]=s.links),s.meta&&(n._relationshipMeta[e]=s.meta)}return n}},{key:"sync",value:function(t,e){var i=t.data,n=this.syncRecord.bind(this),a={};return(e=e||{}).topLevel=e.topLevel||!1,"meta"in t&&(a.meta=t.meta),"links"in t&&(a.links=t.links),"jsonapi"in t&&(a.jsonapi=t.jsonapi),t.errors?(a.errors=t.errors,a):i?(t.included&&t.included.map(n),a.data=i.constructor===Array?i.map(n):n(i),e.topLevel?a:a.data):[]}}]),t}();t.exports.Store=r,t.exports.Model=s}}]);